<!DOCTYPE html>
<html>
    
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>
            Pomelo Chat Web Test
        </title>
        <link rel="stylesheet" href="style.css" type="text/css" />
        <script src="js/jquery-1.8.0.min.js" type="text/javascript">
        </script>
        <script src="js/utf8.js" type="text/javascript">
        </script>
        <script src="js/pomelo.js" type="text/javascript">
        </script>
        <script type="text/javascript">         
         require('boot');
        </script> 
        <script src="js/client.js">                		
        </script>
        <script src="js/pop.js" type="text/javascript">
        </script>
    </head>
    
    <body>
        <div id="app">
            <div id="loginView">
                <div id="loginTitle">
                    Pomelo Chat Web Test
                </div>
                <table>
                    <tr>
                        <td>
                            <input id="input_userId" type="text" placeholder="enter your id" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input id="input_channelId" type="text" placeholder="enter channel"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input id="input_token" type="text" placeholder="enter token"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input id="login" type='button' value="join" />
                        </td>
                    </tr>
                </table>
                <div id="loginError">
                </div>
            </div>
            <div id="chatHistory">
            </div>
            <div id="toolbar">
                <ul id="status">
                    <li>
                        users:
                        <select name="users" id="usersList">
                            <option value="*">
                                all
                            </option>
                        </select>
                    </li>
                    <li>
                        userId:
                        <span id="userId">
                        </span>
                    </li>                    
                    <li>
                        userName:
                        <span id="userName">
                        </span>
                    </li>
                    <li>
                        channelId:
                        <span id="channelId">
                        </span>
                    </li>                   
                </ul>
                <input tabindex="1" type="text" id="entry" />
            </div>
        </div>
        <div id="pop">
            <div id="popHead">
                <a id="popClose" title="close">Close</a>
                <h2>
                    Tip
                </h2>
            </div>
            <div id="popContent">
                <dl>
                    <dd id="popIntro">
                    </dd>
                </dl>
                <p id="popMore">
                    No Tip Again
                </p>
            </div>
        </div>
    </body>
    <script>
function str2ab(str) {
  var buf = new Uint16Array(str.length);
  for (var i=0, strLen=str.length; i<strLen; i++) {
    buf[i] = str.charCodeAt(i);
  }
  return buf;
}

function ab2str(buf) {
  return String.fromCharCode.apply(null, new Uint16Array(buf));
}

    var ab = str2ab(utf8.encode('\ud83d\ude0a'))
    console.log('%j', ab)
    var str = ab2str(ab);
    console.log(str)
    console.log(utf8.decode(str))

    </script>

</html>